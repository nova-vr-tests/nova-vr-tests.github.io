{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./meca-flu/js/meca-flu.js"],"names":["mecaflu","renderer","scene","camera","uniforms","plane","displacement","meshLengthSegments","meshWidthSegments","init","bind","animate","change_uvs","applyDisplacements","onWindowResize","render","geometry","unitx","unity","offsetx","offsety","uvs","attributes","uv","array","i","length","x","y","alpha","beta","Math","sin","THREE","PerspectiveCamera","window","innerWidth","innerHeight","position","z","Scene","amplitude","value","scaleFactor","texture","TextureLoader","load","wrapS","wrapT","MirroredRepeatWrapping","shaderMaterial","ShaderMaterial","vertexShader","document","getElementById","textContent","fragmentShader","meshWidth","meshLength","PlaneBufferGeometry","Float32Array","count","addAttribute","BufferAttribute","Mesh","add","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","container","appendChild","domElement","addEventListener","aspect","updateProjectionMatrix","requestAnimationFrame","time","Date","now","rotation"],"mappings":"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","file":"mecaFlu.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./meca-flu/js/meca-flu.js\");\n","class mecaflu{\n    constructor(){\n        this.renderer= null\n        this.scene = null\n        this.camera = null\n        this.uniforms = null\n        this. plane = null\n        this.displacement = null\n        this.meshLengthSegments = null\n        this.meshWidthSegments = null\n\n        this.init = this.init.bind(this)\n        this.animate = this.animate.bind(this)\n        this.change_uvs = this.change_uvs.bind(this)\n        this.applyDisplacements = this.applyDisplacements.bind(this)\n        this.onWindowResize = this.onWindowResize.bind(this)\n        this.render = this.render.bind(this)\n        this.init()\n        this.animate()\n    }\n\n    // Function to change uv mapping\n    change_uvs(geometry, unitx, unity, offsetx, offsety) {\n        const uvs = geometry.attributes.uv.array\n        for (let i = 0; i < uvs.length; i += 2) {\n            uvs[i] = (uvs[i] + offsetx) * unitx\n            uvs[i + 1] = (uvs[i + 1] + offsety) * unity\n        }\n    }\n\n    // Displaces calculates displacements for each vertices of a mesh\n    applyDisplacements(displacement) {\n        let x = null\n        let y = null\n        const alpha = 0.5\n        const beta = alpha\n        for (let i = 0; i < displacement.length; i++) {\n            x = i / this.meshWidthSegments\n            y = i % this.meshWidthSegments\n            displacement[i] = 2 * Math.sin(alpha * x) * Math.sin(beta * y)\n        }\n    }\n\n    init() {\n        // Camera setup\n        this.camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 1, 10000)\n        this.camera.position.z = 30\n        this.camera.position.x = 5\n\n        // Scene setup\n        this.scene = new THREE.Scene()\n\n        // Shader variables setup\n        this.uniforms = {\n            amplitude: {\n                value: 10,\n            },\n            scaleFactor: {\n                value: 1.0,\n            },\n            texture: {\n                value: new THREE.TextureLoader().load('meca-flu/textures/about-us.png'),\n            }\n        }\n        this.uniforms.texture.value.wrapS = this.uniforms.texture.value.wrapT = THREE.MirroredRepeatWrapping\n        const shaderMaterial = new THREE.ShaderMaterial({\n            uniforms: this.uniforms,\n            vertexShader: document.getElementById('vertexshader').textContent,\n            fragmentShader: document.getElementById('fragmentshader').textContent,\n        })\n\n        // setting up the geometry\n        // play with controls on: https://threejs.org/docs/#api/geometries/PlaneBufferGeometry\n        this.meshLengthSegments = 100\n        this.meshWidthSegments =this.meshLengthSegments\n        let meshWidth = 50\n        let meshLength = meshWidth\n        this.geometry = new THREE.PlaneBufferGeometry(meshLength, meshWidth, this.meshLengthSegments,this.meshWidthSegments)\n\n        // Changing uv mapping of current geometry\n        this.change_uvs(this.geometry, 1, 1, 0, 0)\n\n        // Deforming plane with displacements\n        this.displacement = new Float32Array(this.geometry.attributes.position.count)\n        this.applyDisplacements(this.displacement)\n\n        // Setting up the shaders' attributes\n        this.geometry.addAttribute('displacement', new THREE.BufferAttribute(this.displacement, 1))\n\n        // Creating the mesh\n        this.plane = new THREE.Mesh(this.geometry, shaderMaterial)\n\n        // Adding the mesh to our scene\n        this.scene.add(this.plane)\n\n        // Rendering\n        this.renderer = new THREE.WebGLRenderer()\n        this.renderer.setPixelRatio(window.devicePixelRatio)\n        this.renderer.setSize(window.innerWidth, window.innerHeight)\n        const container = document.getElementById('container')\n        container.appendChild(this.renderer.domElement)\n\n        // Event listeneres\n        window.addEventListener('resize', this.onWindowResize, false)\n    }\n\n    onWindowResize() {\n        this.camera.aspect = window.innerWidth / window.innerHeight\n        this.camera.updateProjectionMatrix()\n        this.renderer.setSize(window.innerWidth, window.innerHeight)\n    }\n\n    animate() {\n        requestAnimationFrame(this.animate)\n        this.render()\n    }\n\n    render() {\n        const time = Date.now() * 0.0001\n\n        // Rotating and scaling plane wrt time\n        this.plane.rotation.z = 0.5 * time\n        this.uniforms.scaleFactor.value = 0.5 * Math.sin(time)\n\n        // Render\n        this. renderer.render(this.scene, this.camera)\n    }\n}\n\nwindow.mecaflu = new mecaflu()\n"],"sourceRoot":""}